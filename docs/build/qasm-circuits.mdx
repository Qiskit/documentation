---
title: Import Qiskit into OpenQASM
description: Import OpenQASM programs as Qiskit circuits

---

# Import Qiskit into OpenQASM

Qiskit provides some tools for converting between OpenQASM representations of quantum programs, and the QuantumCircuit class. Note these tools are still in an exploratory phase of development and will continue to evolve as Qiskit’s support for dynamic circuit capabilities expressed by OpenQASM 3 increases.

<Admonition type="note">
This function is still in the exploratory phase.  Therefore, it is likely that the syntax and capabilities will evolve.
</Admonition> 

## Import an OpenQASM 3 program into Qiskit

Currently two high-level functions are available for importing from OpenQASM 3 into Qiskit. These functions are `load()`, which takes a file name, and `loads()`, which takes the program itself as a string: 


```python
qiskit.qasm3.load(file-name)
```

```python
qiskit.qasm3.loads(program-string)
```

You must install the package `qiskit_qasm3_import ` to use this function.  For example:  

```python
pip install qiskit-qasm3-import
```

In this example, we define a quantum program using OpenQASM 3, and use `loads()` to directly convert it into a QuantumCircuit:

```python
import qiskit.qasm3

program = """
    OPENQASM 3.0;
    include "stdgates.inc";

    input float[64] a;
    qubit[3] q;
    bit[2] mid;
    bit[3] out;

    let aliased = q[0:1];

    gate my_gate(a) c, t {
      gphase(a / 2);
      ry(a) c;
      cx c, t;
    }
    gate my_phase(a) c {
      ctrl @ inv @ gphase(a) c;
    }

    my_gate(a * 2) aliased[0], q[{1, 2}][0];
    measure q[0] -> mid[0];
    measure q[1] -> mid[1];

    while (mid == "00") {
      reset q[0];
      reset q[1];
      my_gate(a) q[0], q[1];
      my_phase(a - pi/2) q[1];
      mid[0] = measure q[0];
      mid[1] = measure q[1];
    }

    if (mid[0]) {
      let inner_alias = q[{0, 1}];
      reset inner_alias;
    }

    out = measure q;
"""
circuit = qiskit.qasm3.loads(program)
circuit.draw("mpl")
```

## Import an OpenQASM 2 program into Qiskit

Currently two high-level functions are available for importing from OpenQASM 2 into Qiskit. These functions are `load()`, which takes a file name, and `loads()`, which takes the program itself as a string. 

```python
qiskit.qasm2.load(filename, *, include_path=('.',), include_input_directory='append', custom_instructions=(), custom_classical=(), strict=False)
```

Parameters:
  - `filename` (str | PathLike) – The path to the OpenQASM 2 program in an ASCII or UTF-8 string.
  - `include_path` (Iterable[str | PathLike]) – Order of directories to search when evluating include statements. The directories are tried from index 0 onwards and the first match is used. The import `qelib1.inc` is special; it is always found before looking in the include path, and contains exactly the content of the [paper describing the OpenQASM 2 language](https://arxiv.org/abs/1707.03429). The gates in this include file are mapped to circuit-library gate objects defined by Qiskit.
  - `include_input_directory` (Literal[`append`, `prepend`] | None) – Whether to add the directory of the input file to the include_path, and if so, whether to append it to search last, or prepend it to search first. Pass `None` to suppress adding this directory entirely.
  - `custom_instructions` (Iterable[CustomInstruction]) – Any custom constructors that should be used for specific gates or opaque instructions during circuit construction. See [Specifying custom instructions](#custom-instructions) for details.
  - `custom_classical` (Iterable[CustomClassical]) – Any custom classical functions that should be used during the parsing of classical expressions. See [Specifying custom classical functions](#custom-classical) for details.
  - `strict` (bool) – whether to run in [strict mode](#strict). 

```python
qiskit.qasm2.loads(string, *, include_path=('.',), custom_instructions=(), custom_classical=(), strict=False)
```

Parameters:
  - `filename` (str | PathLike) – The OpenQASM 2 program in a string.
  - `include_path` (Iterable[str | PathLike]) – Order of directories to search when evluating include statements. The directories are tried from index 0 onwards and the first match is used. The import `qelib1.inc` is treated special; it is always found before looking in the include path, and contains exactly the content of the [paper describing the OpenQASM 2 language](https://arxiv.org/abs/1707.03429). The gates in this include file are mapped to circuit-library gate objects defined by Qiskit.
  - `custom_instructions` (Iterable[CustomInstruction]) – Any custom constructors that should be used for specific gates or opaque instructions during circuit construction. See [Specifying custom instructions](#custom-instructions) for details.
  - `custom_classical` (Iterable[CustomClassical]) – Any custom classical functions that should be used during the parsing of classical expressions. See [Specifying custom classical functions](#custom-classical) for details.
  - `strict` (bool) – whether to run in [strict mode](#strict). 

<span id="custom-instructions"></span>
### Custom quantum instructions

You can extend the quantum components of the OpenQASM 2 language by passing an iterable of information on custom instructions as the argument `custom_instructions`. In files that have compatible definitions for these instructions, the given constructor will be used in place of whatever other handling `qiskit.qasm2` would have done.  You cannot provide a custom instruction that has a different number of parameters or qubits from a defined instruction in a parsed program. Each element of the argument iterable should be a particular data class as follows:

```python
class qiskit.qasm2.CustomInstruction(name, num_params, num_qubits, constructor, builtin=False)
```

The `constructor` field should be a callable object with signature `*args -> Instruction`, where each of the `num_params` args is a floating-point value. Most of the built-in Qiskit gate classes have this form.

The `builtin` field is optional. If set to `true`, the instruction will be defined and available within the parsing, even if there is no definition in any included OpenQASM 2 file. Instructions marked as `builtin` do not require an opaque or gate declaration, but they will silently ignore a compatible declaration.

<span id="custom-classical"></span>
### Custom classical functions

You can extend the processing done to classical expressions (arguments to gates) by passing an iterable to the argument `custom_classical`. This needs the name (a valid OpenQASM 2 identifier), the number of parameters it takes (num_params), and a Python callable that implements the function. The Python callable must be able to accept `num_params` positional floating-point arguments, and must return a float or integer (which will be converted to a float). Built-in functions cannot be overridden. 

```python

class qiskit.qasm2.CustomClassical
```

<span id="strict"></span>
### Strict mode

By default, this parser is a little bit more relaxed than the official specification. It allows trailing commas in parameter lists; unnecessary (empty-statement) semicolons; the `OPENQASM 2.0;` version statement to be omitted; and a couple of other quality-of-life improvements without emitting any errors. However, you can use the "letter-of-the-spec" mode with `strict=True`.

## Examples

### Import an OpenQASM 2 program as a string

Use `loads()` to import an OpenQASM 2 program as a string into a QuantumCircuit:

```python
import qiskit.qasm2
program = '''
    OPENQASM 2.0;
    include "qelib1.inc";
    qreg q[2];
    creg c[2];

    h q[0];
    cx q[0], q[1];

    measure q -> c;
'''
circuit = qiskit.qasm2.loads(program)
circuit.draw()
```

![output](/images/build/qasm2.png)

### Import an OpenQASM 2 program from a file

Use `load()` to import an OpenQASM 2 program from a file into a QuantumCircuit:

```python
import qiskit.qasm2
circuit = qiskit.qasm2.load("myfile.qasm")
```

### Use custom quantum instructions

Use `loads()` to import an OpenQASM 2 program as a string into a QuantumCircuit, but use a custom quantum instruction.  Sometimes you might  want to influence the gate objects that the importer emits for given named instructions. Gates that are defined by the statement `include "qelib1.inc"` are automatically associated with a suitable Qiskit circuit-library gate, but you can extend this:

```python
from qiskit.circuit import Gate
from qiskit.qasm2 import loads, CustomInstruction

class MyGate(Gate):
    def __init__(self, theta):
        super().__init__("my", 2, [theta])

class Builtin(Gate):
    def __init__(self):
        super().__init__("builtin", 1, [])

program = '''
    opaque my(theta) q1, q2;
    qreg q[2];
    my(0.5) q[0], q[1];
    builtin q[0];
'''
customs = [
    CustomInstruction(name="my", num_params=1, num_qubits=2, constructor=MyGate),
    # Setting 'builtin=True' means the instruction doesn't require a declaration to be usable.
    CustomInstruction("builtin", 0, 1, Builtin, builtin=True),
]
circuit = loads(program, custom_instructions=customs)
```

### Use custom classical instructions

Use `loads()` to import an OpenQASM 2 program as a string into a QuantumCircuit, but use a custom classical instruction.  You can add new classical functions used during the description of arguments to gates, both in the main body of the program (which come out constant-folded) and within the bodies of defined gates (which are computed on demand). Here we provide a Python version of `atan2(y, x)`, which mathematically is $\atan(y/x)$, but correctly handles angle quadrants and infinities, and a custom `add_one` function:

```python
import math
from qiskit.qasm2 import loads, CustomClassical

program = '''
    include "qelib1.inc";
    qreg q[2];
    rx(atan2(pi, 3 + add_one(0.2))) q[0];
    cx q[0], q[1];
'''

def add_one(x):
    return x + 1

customs = [
    # `atan2` takes two parameters, and `math.atan2` implements it.
    CustomClassical("atan2", 2, math.atan2),
    # Our `add_one` takes only one parameter.
    CustomClassical("add_one", 1, add_one),
]
circuit = loads(program, custom_classical=customs)
```

<Admonition type="tip" title="Recommendations">
    - [OpenQASM 3 Qiskit API](/api/qiskit/qasm3)
    - [OpenQASM 2 Qiskit API](/api/qiskit/qasm2)
    - [Test your program](../test/)
    - [Run on quantum backends](../run/backends)
</Admonition>