---
title: QkDag (dev version)
description: API reference for QkDag in the dev version of qiskit-c
in_page_toc_min_heading_level: 2
python_api_type: module
python_api_name: QkDag
---

# QkDag

```c
typedef struct QkDag QkDag
```

The `QkDag` struct exposes a low level interface to the Qiskit transpiler’s directed acyclic graph (DAG) representation of a quantum circuit for use in transpiler passes. It exposes only what is defined in the inner data model of Qiskit. Therefore it is missing some functionality that is available in the higher level Python [`DAGCircuit`](/docs/api/qiskit/dev/qiskit.dagcircuit.DAGCircuit#qiskit.dagcircuit.DAGCircuit "qiskit.dagcircuit.DAGCircuit") class.

The C API currently only supports building DAGs that contain operations defined in Qiskit’s internal Rust data model. Generally this includes only gates in the standard gate library, standard non-unitary operations (currently [`Barrier`](/docs/api/qiskit/dev/circuit#qiskit.circuit.Barrier "qiskit.circuit.Barrier"), [`Measure`](/docs/api/qiskit/dev/circuit#qiskit.circuit.Measure "qiskit.circuit.Measure"), [`Reset`](/docs/api/qiskit/dev/circuit#qiskit.circuit.Reset "qiskit.circuit.Reset"), and [`Delay`](/docs/api/qiskit/dev/circuit#qiskit.circuit.Delay "qiskit.circuit.Delay")) and [`UnitaryGate`](/docs/api/qiskit/dev/qiskit.circuit.library.UnitaryGate#qiskit.circuit.library.UnitaryGate "qiskit.circuit.library.UnitaryGate"). This functionality will be expanded over time as the Rust data model is expanded to natively support more functionality.

## Functions

**<span id="group__QkDag_1gaf45fb29cdbe2d5dc6a852e9c14ca08a0" />QkDag \*qk\_dag\_new(void)**

Construct a new empty DAG.

You must free the returned DAG with qk\_dag\_free when done with it.

<span id="group__QkDag_1autotoc_md51" />

### Example

```c
QkDag *empty = qk_dag_new();
```

**Returns**

A pointer to the created DAG.

**<span id="group__QkDag_1ga0bd511df98315cae4d20356ef606525d" />void qk\_dag\_add\_quantum\_register(QkDag \*dag, const QkQuantumRegister \*reg)**

Add a quantum register to the DAG.

<span id="group__QkDag_1autotoc_md52" />

### Example

```c
QkDag *dag = qk_dag_new();
QkQuantumRegister *qr = qk_quantum_register_new(1024, "my_register");
qk_dag_add_quantum_register(dag, qr);
qk_quantum_register_free(qr);
qk_dag_free(dag);
```

<span id="group__QkDag_1autotoc_md53" />

### Safety

<span id="group__QkDag_1autotoc_md53" />

Behavior is undefined if `dag` is not a valid, non-null pointer to a `QkDag` and if `reg` is not a valid, non-null pointer to a `QkQuantumRegister`.

**Parameters**

*   **dag** – A pointer to the DAG.
*   **reg** – A pointer to the quantum register.

**<span id="group__QkDag_1ga32219249fb51bad1d5e928e0ff7638bb" />void qk\_dag\_add\_classical\_register(QkDag \*dag, const QkClassicalRegister \*reg)**

Add a classical register to the DAG.

<span id="group__QkDag_1autotoc_md54" />

### Example

```c
QkDag *dag = qk_dag_new();
QkClassicalRegister *cr = qk_classical_register_new(24, "my_register");
qk_dag_add_classical_register(dag, cr);
qk_classical_register_free(cr);
qk_dag_free(dag);
```

<span id="group__QkDag_1autotoc_md55" />

### Safety

<span id="group__QkDag_1autotoc_md55" />

Behavior is undefined if `dag` is not a valid, non-null pointer to a `QkDag` and if `reg` is not a valid, non-null pointer to a `QkClassicalRegister`.

**Parameters**

*   **dag** – A pointer to the DAG.
*   **reg** – A pointer to the classical register.

**<span id="group__QkDag_1gadd3162cad19b8ce8385bb3df964b871e" />uint32\_t qk\_dag\_num\_qubits(const QkDag \*dag)**

Get the number of qubits the DAG contains.

<span id="group__QkDag_1autotoc_md56" />

### Example

```c
QkDag *dag = qk_dag_new();
QkQuantumRegister *qr = qk_quantum_register_new(24, "my_register");
qk_dag_add_quantum_register(dag, qr);
uint32_t num_qubits = qk_dag_num_qubits(dag);  // num_qubits==24
qk_quantum_register_free(qr);
qk_dag_free(dag);
```

<span id="group__QkDag_1autotoc_md57" />

### Safety

<span id="group__QkDag_1autotoc_md57" />

Behavior is undefined if `dag` is not a valid, non-null pointer to a `QkDag`.

**Parameters**

*   **dag** – A pointer to the DAG.

**Returns**

The number of qubits the DAG is defined on.

**<span id="group__QkDag_1ga2f99ab0e0813f8926fb383a73343b786" />uint32\_t qk\_dag\_num\_clbits(const QkDag \*dag)**

Get the number of clbits the DAG contains.

<span id="group__QkDag_1autotoc_md58" />

### Example

```c
QkDag *dag = qk_dag_new();
QkClassicalRegister *cr = qk_classical_register_new(24, "my_register");
qk_dag_add_classical_register(dag, cr);
uint32_t num_clbits = qk_dag_num_clbits(dag);  // num_clbits==24
qk_classical_register_free(cr);
qk_dag_free(dag);
```

<span id="group__QkDag_1autotoc_md59" />

### Safety

<span id="group__QkDag_1autotoc_md59" />

Behavior is undefined if `dag` is not a valid, non-null pointer to a `QkDag`.

**Parameters**

*   **dag** – A pointer to the DAG.

**Returns**

The number of clbits the DAG is defined on.

**<span id="group__QkDag_1ga4064900d53fa7d3c2ad14d43882af5fe" />void qk\_dag\_free(QkDag \*dag)**

Free the DAG.

<span id="group__QkDag_1autotoc_md60" />

### Example

```c
QkDag *dag = qk_dag_new();
qk_dag_free(dag);
```

<span id="group__QkDag_1autotoc_md61" />

### Safety

<span id="group__QkDag_1autotoc_md61" />

Behavior is undefined if `dag` is not either null or a valid pointer to a `QkDag`.

**Parameters**

*   **dag** – A pointer to the DAG to free.

