---
title: noise_management (latest version)
description: API reference for qiskit_addon_utils.noise_management in the latest version of qiskit-addon-utils
in_page_toc_min_heading_level: 2
python_api_type: module
python_api_name: qiskit_addon_utils.noise_management
---

<span id="module-qiskit_addon_utils.noise_management" />

<span id="noise-management-qiskit-addon-utils-noise-management" />

# noise\_management

`qiskit_addon_utils.noise_management`

Noise management tools.

### trex\_factors

<Function id="qiskit_addon_utils.noise_management.trex_factors" github="https://github.com/Qiskit/qiskit-addon-utils/tree/stable/0.3/qiskit_addon_utils/noise_management/trex_factors.py#L26-L66" signature="trex_factors(measurement_noise_map, basis_dict, /)">
  Calculates TREX mitigation algorithm’s expectation value scale factor for each Pauli term in `basis_dict`.

  Calculates \<Z^n> for each Pauli term in each observable, where n is the non identity indices in the Pauli term. The calculation is done using learned measurement noise.

  **Parameters**

  *   **measurement\_noise\_map** ([*PauliLindbladMap*](/docs/api/qiskit/qiskit.quantum_info.PauliLindbladMap)) – Learned measurement noise in PauliLindbladMap format.
  *   **basis\_dict** ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict)*\[*[*Pauli*](/docs/api/qiskit/qiskit.quantum_info.Pauli)*,* [*list*](https://docs.python.org/3/library/stdtypes.html#list)*\[*[*SparsePauliOp*](/docs/api/qiskit/qiskit.quantum_info.SparsePauliOp) *| None]]*) – Mapping between measure bases and observables in which the TREX algorithm mitigates their
  *   **calculation.** (*expectation value*)

  **Returns**

  A list of numpy array of floats that represent the TREX mitigation algorithm’s expectation value scale factor for each Pauli term in each observable in each basis in the given basis\_dict.
</Function>

### gamma\_from\_noisy\_boxes

<Function id="qiskit_addon_utils.noise_management.gamma_from_noisy_boxes" github="https://github.com/Qiskit/qiskit-addon-utils/tree/stable/0.3/qiskit_addon_utils/noise_management/gamma_factor.py#L21-L61" signature="gamma_from_noisy_boxes(noise_models, box_id_to_noise_id, noise_scales_each_box=None)">
  Calculate the gamma factor for a circuit given the Pauli-Lindblad noise models for the boxes in that circuit.

  This function expects the noise models to represent the noise in the circuit, and thus to have positive Lindblad rates. The returned gamma is that associated with the inverse noise maps needed to cancel the noise in the circuit.

  **Parameters**

  *   **noise\_models** ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict)*\[*[*str*](https://docs.python.org/3/library/stdtypes.html#str)*,* [*PauliLindbladMap*](/docs/api/qiskit/qiskit.quantum_info.PauliLindbladMap)*]*) – Dict of noise-model IDs (strings) and learned noise models for each unique noisy box in the circuit.
  *   **box\_id\_to\_noise\_id** ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict)*\[*[*str*](https://docs.python.org/3/library/stdtypes.html#str)*,* [*str*](https://docs.python.org/3/library/stdtypes.html#str)*]*) – Dict of box IDs and noise-model IDs.
  *   **noise\_scales\_each\_box** ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict)*\[*[*str*](https://docs.python.org/3/library/stdtypes.html#str)*,* [*ndarray*](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray)*] | None*) – Dict of box IDs and factors by which to rescale the Lindblad error rates of each generator in the associated noise model.

  **Returns**

  The gamma factor.

  **Raises**

  **ValueError if the length**\*\* of ****an array in noise\_scales\_each\_box does not equal the length**** of ****rates**** of \*\***the associated** – PauliLindbladMap in noise\_models.

  **Return type**

  [float](https://docs.python.org/3/library/functions.html#float)
</Function>

### PostSelectionSummary

<Class id="qiskit_addon_utils.noise_management.PostSelectionSummary" github="https://github.com/Qiskit/qiskit-addon-utils/tree/stable/0.3/qiskit_addon_utils/noise_management/post_selection/post_selection_summary.py#L28-L117" signature="PostSelectionSummary(primary_cregs, measure_map, edges, *, post_selection_suffix='_ps')" modifiers="class">
  Bases: [`object`](https://docs.python.org/3/library/functions.html#object)

  A helper class to store the properties of a quantum circuit required to post select the results.

  Initialize a `PostSelectionSummary` object.

  **Parameters**

  *   **primary\_cregs** ([*set*](https://docs.python.org/3/library/stdtypes.html#set)*\[*[*str*](https://docs.python.org/3/library/stdtypes.html#str)*]*) – The names of the “primary” classical registers, namely those that do not end with the post selection suffix.
  *   **measure\_map** ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict)*\[*[*int*](https://docs.python.org/3/library/functions.html#int)*,* [*tuple*](https://docs.python.org/3/library/stdtypes.html#tuple)*\[*[*str*](https://docs.python.org/3/library/stdtypes.html#str)*,* [*int*](https://docs.python.org/3/library/functions.html#int)*]]*) – A map between qubit indices to the register and clbits that uniquely define a measurement on those qubits.
  *   **edges** ([*set*](https://docs.python.org/3/library/stdtypes.html#set)*\[*[*frozenset*](https://docs.python.org/3/library/stdtypes.html#frozenset)*\[*[*int*](https://docs.python.org/3/library/functions.html#int)*]]*) – A list of tuples defining pairs of neighboring qubits.
  *   **post\_selection\_suffix** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – The suffix of the post selection registers.

  #### edges

  <Attribute id="qiskit_addon_utils.noise_management.PostSelectionSummary.edges" attributeTypeHint="set[frozenset[int]]">
    A set of edges to consider for edge-based post selection.
  </Attribute>

  #### from\_circuit

  <Function id="qiskit_addon_utils.noise_management.PostSelectionSummary.from_circuit" github="https://github.com/Qiskit/qiskit-addon-utils/tree/stable/0.3/qiskit_addon_utils/noise_management/post_selection/post_selection_summary.py#L74-L108" signature="from_circuit(circuit, coupling_map, *, post_selection_suffix='_ps')" modifiers="classmethod">
    Initialize from quantum circuits.

    **Parameters**

    *   **circuit** ([*QuantumCircuit*](/docs/api/qiskit/qiskit.circuit.QuantumCircuit)) – The circuit to create a summary of.
    *   **coupling\_map** ([*CouplingMap*](/docs/api/qiskit/qiskit.transpiler.CouplingMap)  *|*[*list*](https://docs.python.org/3/library/stdtypes.html#list)*\[*[*tuple*](https://docs.python.org/3/library/stdtypes.html#tuple)*\[*[*int*](https://docs.python.org/3/library/functions.html#int)*,* [*int*](https://docs.python.org/3/library/functions.html#int)*]]*) – A coupling map or a list of tuples indicating pairs of neighboring qubits.
    *   **post\_selection\_suffix** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – A fixed suffix to append to the names of the classical registers when copying them.

    **Return type**

    [*PostSelectionSummary*](#qiskit_addon_utils.noise_management.PostSelectionSummary "qiskit_addon_utils.noise_management.post_selection.post_selection_summary.PostSelectionSummary")
  </Function>

  #### measure\_map

  <Attribute id="qiskit_addon_utils.noise_management.PostSelectionSummary.measure_map" attributeTypeHint="dict[int, tuple[str, int]]">
    A map from qubit indices to the register and clbit index used to measure those qubits.
  </Attribute>

  #### post\_selection\_suffix

  <Attribute id="qiskit_addon_utils.noise_management.PostSelectionSummary.post_selection_suffix" attributeTypeHint="str">
    The suffix of the post selection registers.
  </Attribute>

  #### primary\_cregs

  <Attribute id="qiskit_addon_utils.noise_management.PostSelectionSummary.primary_cregs" attributeTypeHint="set[str]">
    The names of the “primary” classical registers.
  </Attribute>
</Class>

### PostSelector

<Class id="qiskit_addon_utils.noise_management.PostSelector" github="https://github.com/Qiskit/qiskit-addon-utils/tree/stable/0.3/qiskit_addon_utils/noise_management/post_selection/post_selector.py#L41-L109" signature="PostSelector(summary)" modifiers="class">
  Bases: [`object`](https://docs.python.org/3/library/functions.html#object)

  A class to process the results of quantum programs based on the outcome of post selection measurements.

  Initialize a `PostSelector` object.

  **Parameters**

  **summary** ([*PostSelectionSummary*](#qiskit_addon_utils.noise_management.PostSelectionSummary "qiskit_addon_utils.noise_management.PostSelectionSummary")) – A summary of the circuit being post selected.

  #### compute\_mask

  <Function id="qiskit_addon_utils.noise_management.PostSelector.compute_mask" github="https://github.com/Qiskit/qiskit-addon-utils/tree/stable/0.3/qiskit_addon_utils/noise_management/post_selection/post_selector.py#L84-L109" signature="compute_mask(result, strategy=PostSelectionStrategy.NODE)">
    Compute boolean masks indicating what shots should be kept or discarded for the given result.

    This function compares the bits returned by every pair of measurement and post selection measurement, identifying all those that failed to flip. The shots that should be kept are marked as `True` in the returned mask, those that should be discarded are marked as `False`.

    By construction, the returned mask has the same shape as the arrays in corresponding result, but with one fewer dimension (the last axis of every array, over clbits, is not present in the mask).

    **Parameters**

    *   **result** ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict)*\[*[*str*](https://docs.python.org/3/library/stdtypes.html#str)*,* [*ndarray*](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray)*\[*[*tuple*](https://docs.python.org/3/library/stdtypes.html#tuple)*\[*[*int*](https://docs.python.org/3/library/functions.html#int)*, ...],* [*dtype*](https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype)*\[*[*bool*](https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool)*]]]*) – The result to post-process. It must be a `QuantumProgramResult` containing a single item or a dictionary.
    *   **strategy** ([*str*](https://docs.python.org/3/library/stdtypes.html#str) *| PostSelectionStrategy*) – The post selection strategy used to process the result.

    **Return type**

    [*ndarray*](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray)\[[tuple](https://docs.python.org/3/library/stdtypes.html#tuple)\[[int](https://docs.python.org/3/library/functions.html#int), …], [*dtype*](https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype)\[[*bool*](https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bool)]]
  </Function>

  #### from\_circuit

  <Function id="qiskit_addon_utils.noise_management.PostSelector.from_circuit" github="https://github.com/Qiskit/qiskit-addon-utils/tree/stable/0.3/qiskit_addon_utils/noise_management/post_selection/post_selector.py#L57-L82" signature="from_circuit(circuit, coupling_map, *, post_selection_suffix='_ps')" modifiers="classmethod">
    Initialize from quantum circuits.

    **Parameters**

    *   **circuits** – The circuits to process the results of.
    *   **coupling\_map** ([*CouplingMap*](/docs/api/qiskit/qiskit.transpiler.CouplingMap)  *|*[*list*](https://docs.python.org/3/library/stdtypes.html#list)*\[*[*tuple*](https://docs.python.org/3/library/stdtypes.html#tuple)*\[*[*int*](https://docs.python.org/3/library/functions.html#int)*,* [*int*](https://docs.python.org/3/library/functions.html#int)*]]*) – A coupling map or a list of tuples indicating pairs of neighboring qubits.
    *   **post\_selection\_suffix** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – A fixed suffix to append to the names of the classical registers when copying them.
    *   **circuit** ([*QuantumCircuit*](/docs/api/qiskit/qiskit.circuit.QuantumCircuit))

    **Return type**

    [*PostSelector*](#qiskit_addon_utils.noise_management.PostSelector "qiskit_addon_utils.noise_management.post_selection.post_selector.PostSelector")
  </Function>

  #### summary

  <Attribute id="qiskit_addon_utils.noise_management.PostSelector.summary" attributeTypeHint="PostSelectionSummary">
    A summary of the circuit being post selected.
  </Attribute>
</Class>

